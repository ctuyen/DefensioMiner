# Defensio Miner - LXC Container Configuration
# Optimized for 13 vCPU allocation on Proxmox host

# ===========================
# Core Configuration
# ===========================
DEFENSIO_API_BASE=https://mine.defensio.io/api
DEFENSIO_NETWORK=mainnet

# ===========================
# Mining Automation - LXC Optimized
# ===========================

# Use all 13 available vCPUs for the Rust solver
ASHMAIZE_THREADS=13

# Batch size: salts checked per worker thread before reporting
# 16 is optimal for most systems - balances memory and throughput
ASHMAIZE_BATCH_SIZE=16

# Flush interval: when to update hash counter (batch * 256 = 4096)
ASHMAIZE_FLUSH_INTERVAL=4096

# Log hash rate every second for monitoring
ASHMAIZE_LOG_INTERVAL_MS=15000

# Process 8 wallets per solver batch
# This keeps all vCPUs busy while managing memory efficiently
AUTOMATE_SOLVER_BATCH_SIZE=8

# Submit 8 wallets concurrently during submission phase
# Matches batch size for optimal HTTP throughput
AUTOMATE_WALLET_CONCURRENCY=8

# ===========================
# Challenge Polling - Production Settings
# ===========================

# Poll for new challenges every 15 seconds
CHALLENGE_POLL_INTERVAL_MS=15000

# Check 5 wallets for receipt verification before running automation
CHALLENGE_RECEIPT_CHECK_COUNT=5

# Enable fast backlog submission for previous challenges
FAST_BACKLOG_BLOCK=1
FAST_BACKLOG_TIMEOUT_MS=15000

# Wait indefinitely for current batch to finish before rotating to new challenge
SOFT_ROTATE_TIMEOUT_MS=0

# Submit backlog with 16 concurrent connections
FAST_SUBMIT_CONCURRENCY=16

# ===========================
# Submission Retry Configuration
# ===========================

# Retry failed submissions up to 2 times
AUTOMATE_SUBMIT_RETRIES=2

# Start with 1 second backoff, doubles on each retry
AUTOMATE_SUBMIT_RETRY_BASE_MS=1000

# ===========================
# Advanced Solver Tuning
# ===========================

# ROM size: 1GB (default is optimal for memory/performance balance)
ASHMAIZE_ROM_SIZE=1073741824

# Pre-computation size: 16MB
ASHMAIZE_PRE_SIZE=16777216

# Mixing numbers for ROM generation
ASHMAIZE_MIXING_NUMBERS=4

# Hash algorithm parameters (defaults are optimal)
ASHMAIZE_NB_LOOPS=8
ASHMAIZE_NB_INSTRS=256

# Find 1 solution per wallet (optimal for multi-wallet batches)
ASHMAIZE_SOLUTIONS_PER_BATCH=1

# ===========================
# Debug Options (disabled for production)
# ===========================

# Uncomment to see raw solver output
# AUTOMATE_SOLVER_RAW_LOGS=1

# Uncomment to skip generation and only resubmit cached solutions
# AUTOMATE_SUBMIT_ONLY=1
